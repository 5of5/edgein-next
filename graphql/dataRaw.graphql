mutation InsertDataRaw($input: [data_raw_insert_input!]!) {
  insert_data_raw(objects: $input) {
    returning {
      id
      created_at
      resource
      resource_id
      field
      value
      accuracy_weight
    }
  }
}

mutation MarkDataRawAsInactive($resourceType: String!, $resourceId: Int!) {
  update_data_raw(
    _set: { is_active: false }
    where: {
      _and: [
        { resource: { _eq: $resourceType } }
        { resource_id: { _eq: $resourceId } }
      ]
    }
  ) {
    affected_rows
  }
}

query GetIsOwnerVerifiedDataRawByResourceAndField(
  $resourceType: String!
  $resourceId: Int!
  $field: String!
) {
  data_raw(
    where: {
      _and: [
        { resource: { _eq: $resourceType } }
        { resource_id: { _eq: $resourceId } }
        { field: { _eq: $field } }
        { is_owner_verified: { _eq: true }}
      ]
    }
    limit: 1
  ) {
    is_owner_verified
  }
}
